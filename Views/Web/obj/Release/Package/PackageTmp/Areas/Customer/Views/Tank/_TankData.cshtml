@using KarmicEnergy.Web.Areas.Customer.ViewModels.Tank

@model DashboardTankViewModel

<a data-tankname='@Model.TankName' href='@Url.Action("Gauge", "Tank", new { TankId = Model.TankId, Area="Customer" })'>
    <div class="tank-dashboard">
        <div class="title @Model.Color-light">
            <h3>@Model.TankName</h3>
        </div>

        <div class="details @Model.Color">
            @{
                String waterVolumeLastMeasurement = @Model.WaterVolumeLastMeasurement.HasValue ? @Model.WaterVolumeLastMeasurement.Value.ToString("MM/dd/yyyy hh:mm:ss tt") : String.Empty;
            }

            <div class="detail-box detail-watervolume" title="@waterVolumeLastMeasurement">
                <p>Volume</p>
                <p><span>@Model.WaterVolumeCapacity</span></p>
                <p>Gallons</p>
            </div>

            @{
                String ambientTemperatureLastMeasurement = @Model.AmbientTemperatureLastMeasurement.HasValue ? @Model.AmbientTemperatureLastMeasurement.Value.ToString("MM/dd/yyyy hh:mm:ss tt") : String.Empty;
            }

            <div class="detail-box detail-ambienttemperature" title="@ambientTemperatureLastMeasurement">
                <p>Amb Temp</p>
                <p><span>@Model.AmbientTemperature &#8457;</span></p>
            </div>

            @{
                String waterTemperatureLastMeasurement = @Model.WaterTemperatureLastMeasurement.HasValue ? @Model.WaterTemperatureLastMeasurement.Value.ToString("MM/dd/yyyy hh:mm:ss tt") : String.Empty;
            }

            <div class="detail-box detail-watertemperature" title="@waterTemperatureLastMeasurement">
                <p>Water Temp</p>
                <p><span>@Model.WaterTemperature &#8457;</span></p>
            </div>

            <div class="detail-box detail-alarm">
                <p>Alarms</p>
                <p><span>@Model.Alarms</span></p>
            </div>
        </div>

        <div id="graph-draw">
            <div class="row">
                <div class="col-sm-5 col-md-5 tank-image">
                    <div class="col-lg-5">
                        <img src="~/images/tank_models/@Model.ImageTankModelFilename">
                    </div>
                </div>

                <div class="col-sm-2 col-md-2 balloon-water-remaining">
                    <span>@Model.WaterVolume</span>
                    <p>Gallons</p>
                    <p>Remaining</p>
                </div>

                <div class="col-sm-5 col-md-5 waterVolumePercentage">
                    <span>@Model.WaterVolumePercentage.Value.ToString("P2")</span>
                    <p>Full</p>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 col-md-12 chart">
                    <div id="graph-@Model.TankId"></div>
                    <script type="text/javascript">
                        generateWaterVolumeGraph('@Model.TankId');
                    </script>
                </div>
            </div>
        </div>
    </div>
</a>